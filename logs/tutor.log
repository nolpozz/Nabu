2025-08-15 19:03:34,823 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:03:48,490 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:03:48,603 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:03:48,895 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:03:48,899 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:03:48,899 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:03:48,901 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:03:48,901 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:03:48,928 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:03:48,934 - data.migrations - INFO - migrations:run_migrations:76 - Running migration 001: create_user_profile
2025-08-15 19:03:48,947 - data.migrations - INFO - migrations:run_migrations:88 - Migration 001 completed in 9ms
2025-08-15 19:03:48,947 - data.migrations - INFO - migrations:run_migrations:76 - Running migration 002: create_user_notes
2025-08-15 19:03:48,988 - data.migrations - INFO - migrations:run_migrations:88 - Migration 002 completed in 35ms
2025-08-15 19:03:48,988 - data.migrations - INFO - migrations:run_migrations:76 - Running migration 003: create_vocabulary
2025-08-15 19:03:49,027 - data.migrations - INFO - migrations:run_migrations:88 - Migration 003 completed in 39ms
2025-08-15 19:03:49,027 - data.migrations - INFO - migrations:run_migrations:76 - Running migration 004: create_learning_sessions
2025-08-15 19:03:49,072 - data.migrations - INFO - migrations:run_migrations:88 - Migration 004 completed in 35ms
2025-08-15 19:03:49,072 - data.migrations - INFO - migrations:run_migrations:76 - Running migration 005: create_media_library
2025-08-15 19:03:49,114 - data.migrations - INFO - migrations:run_migrations:88 - Migration 005 completed in 24ms
2025-08-15 19:03:49,115 - data.migrations - INFO - migrations:run_migrations:76 - Running migration 006: create_assessments
2025-08-15 19:03:49,151 - data.migrations - INFO - migrations:run_migrations:88 - Migration 006 completed in 31ms
2025-08-15 19:03:49,151 - data.migrations - INFO - migrations:run_migrations:76 - Running migration 007: create_learning_metrics
2025-08-15 19:03:49,180 - data.migrations - INFO - migrations:run_migrations:88 - Migration 007 completed in 21ms
2025-08-15 19:03:49,183 - data.migrations - INFO - migrations:run_migrations:76 - Running migration 008: create_settings
2025-08-15 19:03:49,196 - data.migrations - INFO - migrations:run_migrations:88 - Migration 008 completed in 9ms
2025-08-15 19:03:49,203 - data.migrations - INFO - migrations:run_migrations:76 - Running migration 009: create_data_lifecycle
2025-08-15 19:03:49,221 - data.migrations - INFO - migrations:run_migrations:88 - Migration 009 completed in 10ms
2025-08-15 19:03:49,310 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:03:49,329 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:03:49,337 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:03:49,350 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:03:49,355 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:03:49,355 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:03:49,355 - core.application - INFO - application:__init__:28 - Initializing TutorApplication
2025-08-15 19:03:49,355 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:03:49,358 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:03:49,360 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:03:49,360 - core.application - INFO - application:_initialize_ui:58 - Initializing UI components
2025-08-15 19:03:50,613 - __main__ - ERROR - main:main:68 - Application crashed: cannot use geometry manager pack inside .!frame.!frame which already has slaves managed by grid
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\main.py", line 59, in main
    app = TutorApplication()
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\application.py", line 49, in __init__
    self._initialize_ui()
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\application.py", line 80, in _initialize_ui
    self.dashboard_frame = DashboardFrame(
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\dashboard.py", line 30, in __init__
    self._setup_layout()
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\dashboard.py", line 119, in _setup_layout
    self.start_button.pack(side=tk.LEFT, padx=self.theme.SPACING['sm'])
  File "C:\Users\nolan\Anaconda3\lib\tkinter\__init__.py", line 2396, in pack_configure
    self.tk.call(
_tkinter.TclError: cannot use geometry manager pack inside .!frame.!frame which already has slaves managed by grid
2025-08-15 19:04:28,102 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:04:28,144 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:04:28,301 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:04:28,301 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:04:28,301 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:04:28,301 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:04:28,307 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:04:28,316 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:04:28,324 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:04:28,332 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:04:28,336 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:04:28,345 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:04:28,354 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:04:28,360 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:04:28,365 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:04:28,371 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:04:28,381 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:04:28,386 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:04:28,395 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:04:28,404 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:04:28,412 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:04:28,416 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:04:28,419 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:04:28,438 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:04:28,443 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:04:28,445 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:04:28,446 - core.application - INFO - application:__init__:28 - Initializing TutorApplication
2025-08-15 19:04:28,447 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:04:28,447 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:04:28,447 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:04:28,450 - core.application - INFO - application:_initialize_ui:58 - Initializing UI components
2025-08-15 19:04:29,477 - ui.dashboard - INFO - dashboard:__init__:32 - Dashboard frame initialized
2025-08-15 19:04:29,526 - ui.conversation - INFO - conversation:__init__:32 - Conversation frame initialized
2025-08-15 19:04:29,528 - core.application - INFO - application:_initialize_ui:98 - UI components initialized
2025-08-15 19:04:29,529 - core.application - INFO - application:_initialize_audio:102 - Initializing audio components
2025-08-15 19:04:29,529 - audio.voice_loop - INFO - voice_loop:__init__:23 - VoiceLoop initialized (placeholder)
2025-08-15 19:04:29,529 - core.application - INFO - application:_initialize_audio:109 - Audio components initialized successfully
2025-08-15 19:04:29,529 - core.application - INFO - application:_initialize_agent:119 - Initializing AI agent
2025-08-15 19:04:29,529 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:04:29,529 - core.application - INFO - application:_initialize_agent:127 - AI agent initialized successfully
2025-08-15 19:04:29,529 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-15 19:04:29,529 - core.application - INFO - application:_setup_event_handlers:155 - Event handlers set up
2025-08-15 19:04:29,529 - core.application - INFO - application:__init__:54 - TutorApplication initialized successfully
2025-08-15 19:04:29,529 - core.application - INFO - application:run:246 - Starting application main loop
2025-08-15 19:04:29,529 - core.application - INFO - application:_start_background_services:264 - Starting background services
2025-08-15 19:04:29,537 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:04:29,537 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:04:43,584 - core.application - INFO - application:on_closing:283 - Application closing requested
2025-08-15 19:04:48,606 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:04:48,608 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:04:48,698 - core.application - INFO - application:on_closing:307 - Application closed successfully
2025-08-15 19:04:48,699 - core.application - INFO - application:cleanup:317 - Cleaning up application resources
2025-08-15 19:04:48,724 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:04:48,736 - core.application - INFO - application:cleanup:326 - Application cleanup completed
2025-08-15 19:07:20,285 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:07:20,320 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:16:40,213 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:16:40,275 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:16:45,596 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:16:45,603 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:16:45,605 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:16:45,618 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:16:45,619 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:16:45,638 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:16:45,646 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:16:45,654 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:16:45,659 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:16:45,668 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:16:45,674 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:16:45,678 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:16:45,683 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:16:45,690 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:16:45,701 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:16:45,713 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:16:45,728 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:16:45,734 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:16:45,741 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:16:45,741 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:16:45,755 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:16:45,764 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:16:45,772 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:16:45,774 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:16:45,774 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:16:45,776 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:16:45,778 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:16:45,779 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:16:45,780 - core.application - INFO - application:_initialize_audio_components:101 - Initializing audio components
2025-08-15 19:16:46,397 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:16:46,398 - core.application - INFO - application:_initialize_audio_components:105 - Audio components initialized successfully
2025-08-15 19:16:46,401 - core.application - INFO - application:_initialize_ai_agent:113 - Initializing AI agent
2025-08-15 19:16:46,402 - core.application - ERROR - application:_initialize_ai_agent:119 - Failed to initialize AI agent: __init__() missing 1 required positional argument: 'db_manager'
2025-08-15 19:16:46,405 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:16:47,502 - ui.dashboard - INFO - dashboard:__init__:32 - Dashboard frame initialized
2025-08-15 19:16:47,507 - __main__ - ERROR - main:main:68 - Application crashed: unknown option "-font_size"
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\main.py", line 59, in main
    app = TutorApplication()
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\application.py", line 45, in __init__
    self._initialize_ui()
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\application.py", line 86, in _initialize_ui
    self.conversation_frame = ConversationFrame(
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\conversation.py", line 37, in __init__
    self._setup_ui()
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\conversation.py", line 49, in _setup_ui
    self.title_label = self.theme.create_styled_label(
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\theme.py", line 334, in create_styled_label
    label = tk.Label(
  File "C:\Users\nolan\Anaconda3\lib\tkinter\__init__.py", line 3148, in __init__
    Widget.__init__(self, master, 'label', cnf, kw)
  File "C:\Users\nolan\Anaconda3\lib\tkinter\__init__.py", line 2572, in __init__
    self.tk.call(
_tkinter.TclError: unknown option "-font_size"
2025-08-15 19:17:56,680 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:17:56,739 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:17:58,518 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:17:58,518 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:17:58,518 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:17:58,525 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:17:58,525 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:17:58,532 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:17:58,544 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:17:58,549 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:17:58,556 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:17:58,561 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:17:58,565 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:17:58,576 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:17:58,582 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:17:58,589 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:17:58,595 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:17:58,595 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:17:58,616 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:17:58,626 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:17:58,633 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:17:58,637 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:17:58,641 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:17:58,656 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:17:58,661 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:17:58,661 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:17:58,661 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:17:58,665 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:17:58,665 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:17:58,665 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:17:58,665 - core.application - INFO - application:_initialize_audio_components:101 - Initializing audio components
2025-08-15 19:17:59,135 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:17:59,136 - core.application - INFO - application:_initialize_audio_components:105 - Audio components initialized successfully
2025-08-15 19:17:59,136 - core.application - INFO - application:_initialize_ai_agent:113 - Initializing AI agent
2025-08-15 19:17:59,137 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:17:59,138 - core.application - INFO - application:_initialize_ai_agent:117 - AI agent initialized successfully
2025-08-15 19:17:59,139 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:18:00,077 - ui.dashboard - INFO - dashboard:__init__:32 - Dashboard frame initialized
2025-08-15 19:18:00,095 - __main__ - ERROR - main:main:68 - Application crashed: 'DarkTheme' object has no attribute 'FONTS'
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\main.py", line 59, in main
    app = TutorApplication()
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\application.py", line 45, in __init__
    self._initialize_ui()
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\application.py", line 86, in _initialize_ui
    self.conversation_frame = ConversationFrame(
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\conversation.py", line 37, in __init__
    self._setup_ui()
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\conversation.py", line 66, in _setup_ui
    font=(self.theme.FONTS['body'], self.theme.FONT_SIZES['base']),
AttributeError: 'DarkTheme' object has no attribute 'FONTS'
2025-08-15 19:18:39,547 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:18:39,592 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:18:41,607 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:18:41,609 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:18:41,609 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:18:41,609 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:18:41,609 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:18:41,609 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:18:41,629 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:18:41,635 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:18:41,643 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:18:41,649 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:18:41,658 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:18:41,663 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:18:41,670 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:18:41,679 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:18:41,683 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:18:41,693 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:18:41,705 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:18:41,710 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:18:41,721 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:18:41,726 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:18:41,735 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:18:41,740 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:18:41,751 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:18:41,754 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:18:41,755 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:18:41,757 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:18:41,759 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:18:41,759 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:18:41,759 - core.application - INFO - application:_initialize_audio_components:101 - Initializing audio components
2025-08-15 19:18:42,240 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:18:42,242 - core.application - INFO - application:_initialize_audio_components:105 - Audio components initialized successfully
2025-08-15 19:18:42,242 - core.application - INFO - application:_initialize_ai_agent:113 - Initializing AI agent
2025-08-15 19:18:42,243 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:18:42,243 - core.application - INFO - application:_initialize_ai_agent:117 - AI agent initialized successfully
2025-08-15 19:18:42,244 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:18:43,216 - ui.dashboard - INFO - dashboard:__init__:32 - Dashboard frame initialized
2025-08-15 19:18:43,290 - __main__ - ERROR - main:main:68 - Application crashed: type object 'EventTypes' has no attribute 'USER_MESSAGE'
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\main.py", line 59, in main
    app = TutorApplication()
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\application.py", line 45, in __init__
    self._initialize_ui()
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\application.py", line 86, in _initialize_ui
    self.conversation_frame = ConversationFrame(
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\conversation.py", line 38, in __init__
    self._setup_event_handlers()
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\conversation.py", line 128, in _setup_event_handlers
    self.event_bus.subscribe(EventTypes.USER_MESSAGE, self._on_user_message)
AttributeError: type object 'EventTypes' has no attribute 'USER_MESSAGE'
2025-08-15 19:19:17,942 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:19:17,992 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:19:19,709 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:19:19,709 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:19:19,712 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:19:19,712 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:19:19,712 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:19:19,723 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:19:19,732 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:19:19,739 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:19:19,779 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:19:19,795 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:19:19,827 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:19:19,840 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:19:19,848 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:19:19,862 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:19:19,870 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:19:19,881 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:19:19,901 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:19:19,915 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:19:19,923 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:19:19,927 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:19:19,934 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:19:19,944 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:19:19,949 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:19:19,949 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:19:19,951 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:19:19,951 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:19:19,951 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:19:19,953 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:19:19,955 - core.application - INFO - application:_initialize_audio_components:101 - Initializing audio components
2025-08-15 19:19:20,457 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:19:20,460 - core.application - INFO - application:_initialize_audio_components:105 - Audio components initialized successfully
2025-08-15 19:19:20,460 - core.application - INFO - application:_initialize_ai_agent:113 - Initializing AI agent
2025-08-15 19:19:20,461 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:19:20,462 - core.application - INFO - application:_initialize_ai_agent:117 - AI agent initialized successfully
2025-08-15 19:19:20,463 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:19:21,430 - ui.dashboard - INFO - dashboard:__init__:32 - Dashboard frame initialized
2025-08-15 19:19:21,484 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:19:21,486 - core.application - INFO - application:_initialize_ui:97 - UI components initialized
2025-08-15 19:19:21,486 - core.application - INFO - application:_setup_event_handlers:125 - Setting up event handlers
2025-08-15 19:19:21,488 - core.application - INFO - application:_setup_event_handlers:138 - Event handlers set up
2025-08-15 19:19:21,489 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 19:19:21,491 - core.application - INFO - application:run:188 - Starting application main loop
2025-08-15 19:19:21,491 - core.application - INFO - application:_start_background_services:206 - Starting background services
2025-08-15 19:19:21,493 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:19:21,493 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:19:30,985 - ui.dashboard - INFO - dashboard:_start_conversation:126 - Starting conversation session
2025-08-15 19:19:31,013 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: 6aedc199-fee9-4c00-ba1a-b79767986fb6 (mode: conversation)
2025-08-15 19:19:31,042 - core.application - INFO - application:_show_conversation:157 - Navigating to conversation
2025-08-15 19:19:37,831 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 19:19:37,832 - ui.conversation - INFO - conversation:_start_recording:160 - Recording started
2025-08-15 19:19:37,974 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:129 - Audio stream opened, starting VAD
2025-08-15 19:19:41,984 - audio.voice_loop - ERROR - voice_loop:_process_audio:271 - Audio processing error: 

You tried to access openai.Audio, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2025-08-15 19:19:51,703 - audio.voice_loop - ERROR - voice_loop:_process_audio:271 - Audio processing error: 

You tried to access openai.Audio, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2025-08-15 19:19:52,011 - core.application - INFO - application:_cleanup:217 - Cleaning up application resources
2025-08-15 19:19:52,013 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:19:55,874 - audio.voice_loop - ERROR - voice_loop:_process_audio:271 - Audio processing error: 

You tried to access openai.Audio, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2025-08-15 19:19:56,886 - core.event_bus - ERROR - event_bus:publish:69 - Error in event callback for audio_error: main thread is not in main loop
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\audio\voice_loop.py", line 268, in _process_audio
    raise e
  File "C:\Users\nolan\personal\personal-projects\Nabu\audio\voice_loop.py", line 234, in _process_audio
    transcript = openai.Audio.transcribe(
  File "C:\Users\nolan\personal\personal-projects\Nabu\Nabu-venv\lib\site-packages\openai\lib\_old_api.py", line 39, in __call__
    raise APIRemovedInV1(symbol=self._symbol)
openai.lib._old_api.APIRemovedInV1: 

You tried to access openai.Audio, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\event_bus.py", line 67, in publish
    callback(data)
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\conversation.py", line 253, in _on_audio_error
    self.status_label.config(text=f"Audio Error: {error}")
  File "C:\Users\nolan\Anaconda3\lib\tkinter\__init__.py", line 1646, in configure
    return self._configure('configure', cnf, kw)
  File "C:\Users\nolan\Anaconda3\lib\tkinter\__init__.py", line 1636, in _configure
    self.tk.call(_flatten((self._w, cmd)) + self._options(cnf))
RuntimeError: main thread is not in main loop
2025-08-15 19:19:57,017 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:20:26,773 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:20:26,804 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:20:28,288 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:20:28,288 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:20:28,288 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:20:28,288 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:20:28,295 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:20:28,300 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:20:28,308 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:20:28,313 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:20:28,319 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:20:28,323 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:20:28,332 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:20:28,338 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:20:28,343 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:20:28,351 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:20:28,357 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:20:28,364 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:20:28,378 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:20:28,383 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:20:28,389 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:20:28,389 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:20:28,403 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:20:28,453 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:20:28,495 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:20:28,532 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:20:28,551 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:20:28,555 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:20:28,567 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:20:28,569 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:20:28,571 - core.application - INFO - application:_initialize_audio_components:101 - Initializing audio components
2025-08-15 19:20:29,043 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:20:29,044 - core.application - INFO - application:_initialize_audio_components:105 - Audio components initialized successfully
2025-08-15 19:20:29,046 - core.application - INFO - application:_initialize_ai_agent:113 - Initializing AI agent
2025-08-15 19:20:29,046 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:20:29,048 - core.application - INFO - application:_initialize_ai_agent:117 - AI agent initialized successfully
2025-08-15 19:20:29,049 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:20:29,934 - ui.dashboard - INFO - dashboard:__init__:32 - Dashboard frame initialized
2025-08-15 19:20:29,984 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:20:29,986 - core.application - INFO - application:_initialize_ui:97 - UI components initialized
2025-08-15 19:20:29,987 - core.application - INFO - application:_setup_event_handlers:125 - Setting up event handlers
2025-08-15 19:20:29,988 - core.application - INFO - application:_setup_event_handlers:138 - Event handlers set up
2025-08-15 19:20:29,988 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 19:20:29,989 - core.application - INFO - application:run:188 - Starting application main loop
2025-08-15 19:20:29,990 - core.application - INFO - application:_start_background_services:206 - Starting background services
2025-08-15 19:20:29,991 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:20:29,992 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:20:39,777 - ui.dashboard - INFO - dashboard:_start_conversation:126 - Starting conversation session
2025-08-15 19:20:39,813 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: 80f18034-234f-48ae-b207-d4f6ef13232c (mode: conversation)
2025-08-15 19:20:39,815 - core.application - INFO - application:_show_conversation:157 - Navigating to conversation
2025-08-15 19:20:41,829 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 19:20:41,832 - ui.conversation - INFO - conversation:_start_recording:160 - Recording started
2025-08-15 19:20:41,923 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:129 - Audio stream opened, starting VAD
2025-08-15 19:20:45,858 - audio.voice_loop - ERROR - voice_loop:_process_audio:271 - Audio processing error: 

You tried to access openai.Audio, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2025-08-15 19:20:58,843 - data.database - ERROR - database:get_connection:47 - Database operation failed: Error binding parameter 2 - probably unsupported type.
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 140, in update
    cursor = conn.execute(query, tuple(data.values()) + where_params)
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type.
2025-08-15 19:20:58,846 - core.session_manager - ERROR - session_manager:_update_session_in_db:330 - Failed to update session in database: Error binding parameter 2 - probably unsupported type.
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\session_manager.py", line 327, in _update_session_in_db
    self.db.update('learning_sessions', data, 'id = ?', (session.session_id,))
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 140, in update
    cursor = conn.execute(query, tuple(data.values()) + where_params)
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type.
2025-08-15 19:20:58,882 - audio.voice_loop - ERROR - voice_loop:_process_audio:271 - Audio processing error: 

You tried to access openai.Audio, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2025-08-15 19:20:58,918 - ui.conversation - ERROR - conversation:_end_session:195 - Failed to end session: maximum recursion depth exceeded while calling a Python object
2025-08-15 19:21:03,064 - ui.conversation - INFO - conversation:_clear_conversation:203 - Conversation cleared
2025-08-15 19:21:10,822 - core.application - INFO - application:_cleanup:217 - Cleaning up application resources
2025-08-15 19:21:10,823 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:21:15,683 - audio.voice_loop - ERROR - voice_loop:_process_audio:271 - Audio processing error: 

You tried to access openai.Audio, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2025-08-15 19:21:15,824 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:23:43,699 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:23:43,739 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:23:45,482 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:23:45,483 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:23:45,483 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:23:45,489 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:23:45,491 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:23:45,499 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:23:45,507 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:23:45,512 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:23:45,522 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:23:45,528 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:23:45,533 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:23:45,542 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:23:45,542 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:23:45,542 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:23:45,559 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:23:45,565 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:23:45,588 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:23:45,595 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:23:45,602 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:23:45,609 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:23:45,621 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:23:45,633 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:23:45,641 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:23:45,643 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:23:45,645 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:23:45,645 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:23:45,647 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:23:45,648 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:23:45,648 - core.application - INFO - application:_initialize_audio_components:101 - Initializing audio components
2025-08-15 19:23:46,365 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:23:46,377 - core.application - INFO - application:_initialize_audio_components:105 - Audio components initialized successfully
2025-08-15 19:23:46,378 - core.application - INFO - application:_initialize_ai_agent:113 - Initializing AI agent
2025-08-15 19:23:46,379 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:23:46,380 - core.application - INFO - application:_initialize_ai_agent:117 - AI agent initialized successfully
2025-08-15 19:23:46,381 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:23:47,388 - ui.dashboard - INFO - dashboard:__init__:32 - Dashboard frame initialized
2025-08-15 19:23:47,464 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:23:47,465 - core.application - INFO - application:_initialize_ui:97 - UI components initialized
2025-08-15 19:23:47,466 - core.application - INFO - application:_setup_event_handlers:125 - Setting up event handlers
2025-08-15 19:23:47,468 - core.application - INFO - application:_setup_event_handlers:138 - Event handlers set up
2025-08-15 19:23:47,470 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 19:23:47,471 - core.application - INFO - application:run:188 - Starting application main loop
2025-08-15 19:23:47,473 - core.application - INFO - application:_start_background_services:206 - Starting background services
2025-08-15 19:23:47,473 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:23:47,474 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:23:50,588 - ui.dashboard - INFO - dashboard:_start_conversation:130 - Starting conversation session
2025-08-15 19:23:50,610 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: d3f04830-36bc-402d-81e4-877391174fd7 (mode: conversation)
2025-08-15 19:23:50,611 - core.application - INFO - application:_show_conversation:157 - Navigating to conversation
2025-08-15 19:23:52,367 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 19:23:52,369 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-15 19:23:52,464 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:129 - Audio stream opened, starting VAD
2025-08-15 19:24:00,973 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:24:03,174 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:24:06,650 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:24:08,004 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:24:12,185 - audio.voice_loop - INFO - voice_loop:stop_recording:106 - Recording stopped
2025-08-15 19:24:12,187 - ui.conversation - INFO - conversation:_stop_recording:178 - Recording stopped
2025-08-15 19:24:22,019 - core.application - INFO - application:_cleanup:217 - Cleaning up application resources
2025-08-15 19:24:22,020 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:24:27,021 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:24:27,294 - audio.voice_loop - INFO - voice_loop:cleanup:385 - VoiceLoop cleanup completed
2025-08-15 19:24:27,295 - core.application - INFO - application:_cleanup:234 - Application cleanup completed
2025-08-15 19:29:07,851 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:29:07,889 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:29:30,102 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:29:30,140 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:30:27,122 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:30:27,157 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:30:28,943 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:30:28,947 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:30:28,947 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:30:28,949 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:30:28,949 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:30:28,957 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:30:28,964 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:30:28,973 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:30:28,980 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:30:28,989 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:30:28,995 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:30:29,004 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:30:29,012 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:30:29,022 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:30:29,027 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:30:29,034 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:30:29,043 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:30:29,049 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:30:29,056 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:30:29,056 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:30:29,071 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:30:29,077 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:30:29,088 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:30:29,090 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:30:29,090 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:30:29,091 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:30:29,091 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:30:29,091 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:30:29,094 - core.application - INFO - application:_initialize_audio_components:101 - Initializing audio components
2025-08-15 19:30:29,758 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:30:29,759 - core.application - INFO - application:_initialize_audio_components:105 - Audio components initialized successfully
2025-08-15 19:30:29,760 - core.application - INFO - application:_initialize_ai_agent:113 - Initializing AI agent
2025-08-15 19:30:29,761 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:30:29,762 - core.application - INFO - application:_initialize_ai_agent:117 - AI agent initialized successfully
2025-08-15 19:30:29,762 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:30:30,825 - ui.dashboard - INFO - dashboard:__init__:32 - Dashboard frame initialized
2025-08-15 19:30:30,896 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:30:30,898 - core.application - INFO - application:_initialize_ui:97 - UI components initialized
2025-08-15 19:30:30,898 - core.application - INFO - application:_setup_event_handlers:125 - Setting up event handlers
2025-08-15 19:30:30,900 - core.application - INFO - application:_setup_event_handlers:138 - Event handlers set up
2025-08-15 19:30:30,901 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 19:30:30,903 - core.application - INFO - application:run:188 - Starting application main loop
2025-08-15 19:30:30,904 - core.application - INFO - application:_start_background_services:206 - Starting background services
2025-08-15 19:30:30,906 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:30:30,906 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:30:32,619 - ui.dashboard - INFO - dashboard:_start_conversation:130 - Starting conversation session
2025-08-15 19:30:32,642 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: ed1715f4-1b5c-4d50-b3fb-a7322c0b5c99 (mode: conversation)
2025-08-15 19:30:32,643 - core.application - INFO - application:_show_conversation:157 - Navigating to conversation
2025-08-15 19:30:34,190 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 19:30:34,191 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-15 19:30:34,293 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:129 - Audio stream opened, starting VAD
2025-08-15 19:30:40,481 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:30:42,074 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:30:46,521 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:30:47,248 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:30:52,400 - audio.voice_loop - INFO - voice_loop:stop_recording:106 - Recording stopped
2025-08-15 19:30:52,402 - ui.conversation - INFO - conversation:_stop_recording:178 - Recording stopped
2025-08-15 19:30:53,588 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:30:53,801 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:30:55,639 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:31:02,385 - core.application - INFO - application:_cleanup:217 - Cleaning up application resources
2025-08-15 19:31:02,387 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:31:07,389 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:31:07,661 - audio.voice_loop - INFO - voice_loop:cleanup:384 - VoiceLoop cleanup completed
2025-08-15 19:31:07,664 - core.application - INFO - application:_cleanup:234 - Application cleanup completed
2025-08-15 19:35:01,563 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:35:01,611 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:35:03,459 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:35:03,459 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.3, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:35:03,459 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:35:03,459 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:35:03,459 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:35:03,475 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:35:03,480 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:35:03,488 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:35:03,495 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:35:03,499 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:35:03,503 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:35:03,514 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:35:03,519 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:35:03,524 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:35:03,532 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:35:03,532 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:35:03,545 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:35:03,553 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:35:03,560 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:35:03,562 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:35:03,571 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:35:03,578 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:35:03,587 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:35:03,587 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:35:03,587 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:35:03,587 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:35:03,587 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:35:03,592 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:35:03,592 - core.application - INFO - application:_initialize_audio_components:101 - Initializing audio components
2025-08-15 19:35:04,176 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:35:04,178 - core.application - INFO - application:_initialize_audio_components:105 - Audio components initialized successfully
2025-08-15 19:35:04,180 - core.application - INFO - application:_initialize_ai_agent:113 - Initializing AI agent
2025-08-15 19:35:04,181 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:35:04,182 - core.application - INFO - application:_initialize_ai_agent:117 - AI agent initialized successfully
2025-08-15 19:35:04,183 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:35:05,206 - ui.dashboard - INFO - dashboard:__init__:33 - Dashboard frame initialized
2025-08-15 19:35:05,271 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:35:05,273 - core.application - INFO - application:_initialize_ui:97 - UI components initialized
2025-08-15 19:35:05,275 - core.application - INFO - application:_setup_event_handlers:125 - Setting up event handlers
2025-08-15 19:35:05,277 - core.application - INFO - application:_setup_event_handlers:138 - Event handlers set up
2025-08-15 19:35:05,278 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 19:35:05,279 - core.application - INFO - application:run:188 - Starting application main loop
2025-08-15 19:35:05,280 - core.application - INFO - application:_start_background_services:206 - Starting background services
2025-08-15 19:35:05,281 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:35:05,281 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:35:07,743 - ui.dashboard - INFO - dashboard:_start_conversation:131 - Starting conversation session
2025-08-15 19:35:07,774 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: 704036c1-6e70-487b-8f58-49e0a0a2c575 (mode: conversation)
2025-08-15 19:35:07,776 - core.application - INFO - application:_show_conversation:157 - Navigating to conversation
2025-08-15 19:35:09,593 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-15 19:35:09,593 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 19:35:09,595 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-15 19:35:09,687 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-15 19:35:10,467 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:35:14,056 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:35:16,109 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:35:16,353 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:35:17,077 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:35:18,405 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:35:18,669 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:35:21,475 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:35:21,987 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:35:22,496 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:35:23,813 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:35:26,597 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:35:28,646 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:35:28,852 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:35:30,182 - audio.voice_loop - INFO - voice_loop:stop_recording:106 - Recording stopped
2025-08-15 19:35:30,182 - ui.conversation - INFO - conversation:_stop_recording:178 - Recording stopped
2025-08-15 19:35:30,480 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:35:31,405 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:35:32,526 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:35:32,957 - core.application - INFO - application:_cleanup:217 - Cleaning up application resources
2025-08-15 19:35:32,958 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:35:34,180 - core.event_bus - ERROR - event_bus:publish:69 - Error in event callback for tts_completed: main thread is not in main loop
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\event_bus.py", line 67, in publish
    callback(data)
  File "C:\Users\nolan\personal\personal-projects\Nabu\ui\conversation.py", line 281, in _on_tts_completed
    self.status_label.config(text="Ready for next input")
  File "C:\Users\nolan\Anaconda3\lib\tkinter\__init__.py", line 1646, in configure
    return self._configure('configure', cnf, kw)
  File "C:\Users\nolan\Anaconda3\lib\tkinter\__init__.py", line 1636, in _configure
    self.tk.call(_flatten((self._w, cmd)) + self._options(cnf))
RuntimeError: main thread is not in main loop
2025-08-15 19:35:35,283 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:35:35,542 - audio.voice_loop - INFO - voice_loop:cleanup:406 - VoiceLoop cleanup completed
2025-08-15 19:35:35,543 - core.application - INFO - application:_cleanup:234 - Application cleanup completed
2025-08-15 19:38:09,289 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:38:09,339 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:38:11,284 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:38:11,286 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.3, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:38:11,287 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:38:11,289 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:38:11,291 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:38:11,300 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:38:11,310 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:11,316 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:11,322 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:11,328 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:11,334 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:11,339 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:11,345 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:11,352 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:11,358 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:11,360 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:11,381 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:38:11,386 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:38:11,394 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:38:11,396 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:38:11,402 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:38:11,412 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:38:11,419 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:38:11,419 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:38:11,419 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:38:11,419 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:38:11,419 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:38:11,419 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:38:11,419 - core.application - INFO - application:_initialize_audio_components:107 - Initializing audio components
2025-08-15 19:38:11,987 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:38:11,989 - core.application - INFO - application:_initialize_audio_components:111 - Audio components initialized successfully
2025-08-15 19:38:11,990 - core.application - INFO - application:_initialize_ai_agent:119 - Initializing AI agent
2025-08-15 19:38:11,991 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:38:11,992 - core.application - INFO - application:_initialize_ai_agent:123 - AI agent initialized successfully
2025-08-15 19:38:11,993 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:38:13,013 - ui.dashboard - INFO - dashboard:__init__:33 - Dashboard frame initialized
2025-08-15 19:38:13,091 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:38:13,092 - __main__ - ERROR - main:main:68 - Application crashed: 'ConversationFrame' object has no attribute 'grid_remove'
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\main.py", line 59, in main
    app = TutorApplication()
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\application.py", line 45, in __init__
    self._initialize_ui()
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\application.py", line 98, in _initialize_ui
    self.conversation_frame.grid_remove()
AttributeError: 'ConversationFrame' object has no attribute 'grid_remove'
2025-08-15 19:38:32,871 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:38:32,921 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:38:34,768 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:38:34,768 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.3, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:38:34,768 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:38:34,768 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:38:34,768 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:38:34,783 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:38:34,789 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:34,800 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:34,807 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:34,812 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:34,819 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:34,825 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:34,828 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:34,836 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:34,843 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:34,846 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:38:34,879 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:38:34,914 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:38:34,928 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:38:34,937 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:38:34,960 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:38:34,997 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:38:35,007 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:38:35,022 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:38:35,022 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:38:35,022 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:38:35,022 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:38:35,022 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:38:35,022 - core.application - INFO - application:_initialize_audio_components:107 - Initializing audio components
2025-08-15 19:38:35,579 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:38:35,579 - core.application - INFO - application:_initialize_audio_components:111 - Audio components initialized successfully
2025-08-15 19:38:35,580 - core.application - INFO - application:_initialize_ai_agent:119 - Initializing AI agent
2025-08-15 19:38:35,582 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:38:35,582 - core.application - INFO - application:_initialize_ai_agent:123 - AI agent initialized successfully
2025-08-15 19:38:35,584 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:38:36,530 - ui.dashboard - INFO - dashboard:__init__:33 - Dashboard frame initialized
2025-08-15 19:38:36,602 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:38:36,605 - core.application - INFO - application:_initialize_ui:103 - UI components initialized
2025-08-15 19:38:36,605 - core.application - INFO - application:_setup_event_handlers:131 - Setting up event handlers
2025-08-15 19:38:36,607 - core.application - INFO - application:_setup_event_handlers:144 - Event handlers set up
2025-08-15 19:38:36,607 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 19:38:36,608 - core.application - INFO - application:run:200 - Starting application main loop
2025-08-15 19:38:36,608 - core.application - INFO - application:_start_background_services:218 - Starting background services
2025-08-15 19:38:36,609 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:38:36,610 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:38:38,943 - ui.dashboard - INFO - dashboard:_start_conversation:131 - Starting conversation session
2025-08-15 19:38:38,971 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: 91c8403b-c2c5-4072-9956-91afa6bcf550 (mode: conversation)
2025-08-15 19:38:38,972 - core.application - INFO - application:_show_conversation:163 - Navigating to conversation
2025-08-15 19:38:40,300 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-15 19:38:40,300 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 19:38:40,302 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-15 19:38:40,404 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-15 19:38:41,186 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:38:44,512 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:38:45,282 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:38:47,296 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:38:47,584 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:38:48,931 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:38:50,401 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:38:50,572 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:38:51,206 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:38:51,945 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:38:52,705 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:38:53,472 - audio.voice_loop - INFO - voice_loop:stop_recording:106 - Recording stopped
2025-08-15 19:38:53,475 - ui.conversation - INFO - conversation:_stop_recording:178 - Recording stopped
2025-08-15 19:38:55,074 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:38:55,919 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:38:57,271 - ui.conversation - INFO - conversation:_clear_conversation:206 - Conversation cleared
2025-08-15 19:38:59,142 - core.application - INFO - application:_on_closing:194 - Window closing
2025-08-15 19:38:59,144 - core.application - INFO - application:_cleanup:229 - Cleaning up application resources
2025-08-15 19:38:59,144 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:39:04,145 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:39:04,433 - audio.voice_loop - INFO - voice_loop:cleanup:406 - VoiceLoop cleanup completed
2025-08-15 19:39:04,435 - core.application - INFO - application:_cleanup:246 - Application cleanup completed
2025-08-15 19:39:04,483 - core.application - INFO - application:_cleanup:229 - Cleaning up application resources
2025-08-15 19:39:04,484 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:39:06,611 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:39:06,612 - audio.voice_loop - INFO - voice_loop:cleanup:406 - VoiceLoop cleanup completed
2025-08-15 19:39:06,615 - core.application - INFO - application:_cleanup:246 - Application cleanup completed
2025-08-15 19:42:32,295 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:42:32,338 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:42:34,457 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:42:34,457 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:42:34,457 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:42:34,463 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:42:34,463 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:42:34,470 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:42:34,479 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:42:34,490 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:42:34,490 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:42:34,503 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:42:34,506 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:42:34,516 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:42:34,523 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:42:34,523 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:42:34,536 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:42:34,542 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:42:34,556 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:42:34,556 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:42:34,571 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:42:34,573 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:42:34,577 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:42:34,593 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:42:34,598 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:42:34,598 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:42:34,601 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:42:34,603 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:42:34,605 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:42:34,606 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:42:34,606 - core.application - INFO - application:_initialize_audio_components:109 - Initializing audio components
2025-08-15 19:42:35,179 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:42:35,180 - core.application - INFO - application:_initialize_audio_components:113 - Audio components initialized successfully
2025-08-15 19:42:35,182 - core.application - INFO - application:_initialize_ai_agent:121 - Initializing AI agent
2025-08-15 19:42:35,182 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:42:35,184 - core.application - INFO - application:_initialize_ai_agent:125 - AI agent initialized successfully
2025-08-15 19:42:35,186 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:42:35,403 - core.application - INFO - application:_initialize_ui:80 - Creating dashboard frame...
2025-08-15 19:42:36,123 - ui.dashboard - INFO - dashboard:__init__:33 - Dashboard frame initialized
2025-08-15 19:42:36,124 - core.application - INFO - application:_initialize_ui:87 - Creating conversation frame...
2025-08-15 19:42:36,193 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:42:36,194 - core.application - INFO - application:_initialize_ui:105 - UI components initialized
2025-08-15 19:42:36,195 - core.application - INFO - application:_setup_event_handlers:133 - Setting up event handlers
2025-08-15 19:42:36,196 - core.application - INFO - application:_setup_event_handlers:146 - Event handlers set up
2025-08-15 19:42:36,196 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 19:42:36,196 - core.application - INFO - application:run:202 - Starting application main loop
2025-08-15 19:42:36,197 - core.application - INFO - application:_start_background_services:220 - Starting background services
2025-08-15 19:42:36,197 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:42:36,199 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:42:40,884 - ui.dashboard - INFO - dashboard:_start_conversation:131 - Starting conversation session
2025-08-15 19:42:40,907 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: 0f3a784c-45eb-499f-ad24-742aebbf036e (mode: conversation)
2025-08-15 19:42:40,909 - core.application - INFO - application:_show_conversation:165 - Navigating to conversation
2025-08-15 19:42:44,200 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-15 19:42:44,200 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 19:42:44,201 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-15 19:42:44,306 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-15 19:42:45,606 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:42:48,675 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:42:51,045 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:42:51,823 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:42:53,024 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:42:54,813 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:42:56,609 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:42:58,914 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:43:01,450 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:43:01,984 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:43:02,474 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:43:04,286 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:43:04,941 - audio.voice_loop - INFO - voice_loop:stop_recording:106 - Recording stopped
2025-08-15 19:43:04,943 - ui.conversation - INFO - conversation:_stop_recording:178 - Recording stopped
2025-08-15 19:43:14,358 - core.application - INFO - application:_on_closing:196 - Window closing
2025-08-15 19:43:14,359 - core.application - INFO - application:_cleanup:231 - Cleaning up application resources
2025-08-15 19:43:14,360 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:43:19,363 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:43:19,628 - audio.voice_loop - INFO - voice_loop:cleanup:406 - VoiceLoop cleanup completed
2025-08-15 19:43:19,629 - core.application - INFO - application:_cleanup:248 - Application cleanup completed
2025-08-15 19:43:19,677 - core.application - INFO - application:_cleanup:231 - Cleaning up application resources
2025-08-15 19:43:19,681 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:43:24,684 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:43:24,685 - audio.voice_loop - INFO - voice_loop:cleanup:406 - VoiceLoop cleanup completed
2025-08-15 19:43:24,686 - core.application - INFO - application:_cleanup:248 - Application cleanup completed
2025-08-15 19:44:32,206 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:44:32,256 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:44:34,560 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:44:34,562 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:44:34,562 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:44:34,564 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:44:34,566 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:44:34,578 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:44:34,589 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:44:34,594 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:44:34,600 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:44:34,608 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:44:34,615 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:44:34,624 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:44:34,631 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:44:34,641 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:44:34,643 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:44:34,655 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:44:34,673 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:44:34,679 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:44:34,685 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:44:34,689 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:44:34,699 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:44:34,710 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:44:34,714 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:44:34,714 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:44:34,714 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:44:34,718 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:44:34,718 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:44:34,720 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:44:34,722 - core.application - INFO - application:_initialize_audio_components:115 - Initializing audio components
2025-08-15 19:44:35,283 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:44:35,284 - core.application - INFO - application:_initialize_audio_components:119 - Audio components initialized successfully
2025-08-15 19:44:35,285 - core.application - INFO - application:_initialize_ai_agent:127 - Initializing AI agent
2025-08-15 19:44:35,286 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:44:35,288 - core.application - INFO - application:_initialize_ai_agent:131 - AI agent initialized successfully
2025-08-15 19:44:35,290 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:44:35,401 - core.application - INFO - application:_initialize_ui:63 - Main window created: tk
2025-08-15 19:44:35,482 - core.application - INFO - application:_initialize_ui:86 - Creating dashboard frame...
2025-08-15 19:44:36,588 - ui.dashboard - INFO - dashboard:__init__:33 - Dashboard frame initialized
2025-08-15 19:44:36,589 - core.application - INFO - application:_initialize_ui:93 - Creating conversation frame...
2025-08-15 19:44:36,662 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:44:36,663 - core.application - INFO - application:_initialize_ui:111 - UI components initialized
2025-08-15 19:44:36,664 - core.application - INFO - application:_setup_event_handlers:139 - Setting up event handlers
2025-08-15 19:44:36,665 - core.application - INFO - application:_setup_event_handlers:152 - Event handlers set up
2025-08-15 19:44:36,665 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 19:44:36,666 - core.application - INFO - application:run:208 - Starting application main loop
2025-08-15 19:44:36,667 - core.application - INFO - application:_start_background_services:226 - Starting background services
2025-08-15 19:44:36,669 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:44:36,670 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:44:40,489 - ui.dashboard - INFO - dashboard:_start_conversation:131 - Starting conversation session
2025-08-15 19:44:40,510 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: 82376c3e-580b-4af5-8466-f326c9971c9d (mode: conversation)
2025-08-15 19:44:40,511 - core.application - INFO - application:_show_conversation:171 - Navigating to conversation
2025-08-15 19:44:56,618 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-15 19:44:56,619 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 19:44:56,623 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-15 19:44:56,712 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-15 19:44:57,751 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:45:04,414 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:45:06,387 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:45:06,973 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:45:07,198 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:45:08,500 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:45:08,761 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:45:10,549 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:45:11,499 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:45:12,851 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:45:13,196 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:45:16,949 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:45:20,749 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:45:29,988 - core.application - INFO - application:_on_closing:202 - Window closing
2025-08-15 19:45:29,989 - core.application - INFO - application:_cleanup:237 - Cleaning up application resources
2025-08-15 19:45:29,991 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:45:35,006 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:45:35,381 - audio.voice_loop - INFO - voice_loop:cleanup:406 - VoiceLoop cleanup completed
2025-08-15 19:45:35,382 - core.application - INFO - application:_cleanup:254 - Application cleanup completed
2025-08-15 19:45:59,034 - core.application - INFO - application:_cleanup:237 - Cleaning up application resources
2025-08-15 19:45:59,036 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:45:59,037 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:45:59,040 - audio.voice_loop - INFO - voice_loop:cleanup:406 - VoiceLoop cleanup completed
2025-08-15 19:45:59,041 - core.application - INFO - application:_cleanup:254 - Application cleanup completed
2025-08-15 19:53:12,384 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:53:12,431 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:53:14,995 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:53:14,997 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:53:14,998 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:53:14,999 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:53:15,001 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:53:15,009 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:53:15,018 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:53:15,025 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:53:15,030 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:53:15,040 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:53:15,049 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:53:15,056 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:53:15,060 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:53:15,071 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:53:15,072 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:53:15,072 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:53:15,089 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:53:15,102 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:53:15,105 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:53:15,105 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:53:15,121 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:53:15,134 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:53:15,140 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:53:15,141 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:53:15,141 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:53:15,141 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:53:15,141 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:53:15,141 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:53:15,141 - core.application - INFO - application:_initialize_audio_components:113 - Initializing audio components
2025-08-15 19:53:15,848 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:53:15,850 - core.application - INFO - application:_initialize_audio_components:117 - Audio components initialized successfully
2025-08-15 19:53:15,850 - core.application - INFO - application:_initialize_ai_agent:125 - Initializing AI agent
2025-08-15 19:53:15,852 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:53:15,853 - core.application - INFO - application:_initialize_ai_agent:129 - AI agent initialized successfully
2025-08-15 19:53:15,853 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:53:16,109 - core.application - INFO - application:_initialize_ui:84 - Creating dashboard frame...
2025-08-15 19:53:17,105 - ui.dashboard - INFO - dashboard:__init__:33 - Dashboard frame initialized
2025-08-15 19:53:17,107 - core.application - INFO - application:_initialize_ui:91 - Creating conversation frame...
2025-08-15 19:53:17,224 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:53:17,227 - core.application - INFO - application:_initialize_ui:109 - UI components initialized
2025-08-15 19:53:17,228 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-15 19:53:17,229 - core.application - INFO - application:_setup_event_handlers:150 - Event handlers set up
2025-08-15 19:53:17,230 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 19:53:17,230 - core.application - INFO - application:run:206 - Starting application main loop
2025-08-15 19:53:17,231 - core.application - INFO - application:_start_background_services:224 - Starting background services
2025-08-15 19:53:17,233 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:53:17,234 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:53:19,163 - ui.dashboard - INFO - dashboard:_start_conversation:131 - Starting conversation session
2025-08-15 19:53:19,181 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: d5b0f279-6207-4e5a-934f-51a5d9e30ba0 (mode: conversation)
2025-08-15 19:53:19,184 - core.application - INFO - application:_show_conversation:169 - Navigating to conversation
2025-08-15 19:53:29,433 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-15 19:53:29,433 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 19:53:29,435 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-15 19:53:29,535 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-15 19:53:30,315 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:53:32,876 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:53:33,903 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:53:34,695 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:53:35,703 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:53:35,956 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:53:37,237 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:53:44,916 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:53:46,022 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:53:47,179 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:53:53,356 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:53:55,156 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:53:55,916 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:54:00,782 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:54:01,932 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:54:02,955 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:54:06,413 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:54:13,322 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:54:13,583 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:54:15,858 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:54:16,890 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:54:19,081 - core.application - INFO - application:_on_closing:200 - Window closing
2025-08-15 19:54:19,083 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-15 19:54:19,084 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 19:54:20,756 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:54:22,035 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:54:23,561 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:54:24,084 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 19:58:19,882 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:58:19,904 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:58:21,108 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 19:58:21,108 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 19:58:21,108 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 19:58:21,112 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:58:21,112 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 19:58:21,128 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 19:58:21,132 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:58:21,139 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:58:21,143 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:58:21,146 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:58:21,146 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:58:21,152 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:58:21,156 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:58:21,158 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:58:21,162 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:58:21,162 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 19:58:21,175 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 19:58:21,178 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:58:21,178 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 19:58:21,178 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 19:58:21,186 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 19:58:21,193 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 19:58:21,193 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 19:58:21,193 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 19:58:21,193 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 19:58:21,193 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 19:58:21,193 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 19:58:21,193 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 19:58:21,193 - core.application - INFO - application:_initialize_audio_components:113 - Initializing audio components
2025-08-15 19:58:21,676 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 19:58:21,677 - core.application - INFO - application:_initialize_audio_components:117 - Audio components initialized successfully
2025-08-15 19:58:21,678 - core.application - INFO - application:_initialize_ai_agent:125 - Initializing AI agent
2025-08-15 19:58:21,678 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 19:58:21,679 - core.application - INFO - application:_initialize_ai_agent:129 - AI agent initialized successfully
2025-08-15 19:58:21,679 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 19:58:21,834 - core.application - INFO - application:_initialize_ui:84 - Creating dashboard frame...
2025-08-15 19:58:22,480 - ui.dashboard - INFO - dashboard:__init__:33 - Dashboard frame initialized
2025-08-15 19:58:22,480 - core.application - INFO - application:_initialize_ui:91 - Creating conversation frame...
2025-08-15 19:58:22,529 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 19:58:22,530 - core.application - INFO - application:_initialize_ui:109 - UI components initialized
2025-08-15 19:58:22,530 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-15 19:58:22,530 - core.application - INFO - application:_setup_event_handlers:150 - Event handlers set up
2025-08-15 19:58:22,531 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 19:58:22,531 - core.application - INFO - application:run:206 - Starting application main loop
2025-08-15 19:58:22,532 - core.application - INFO - application:_start_background_services:224 - Starting background services
2025-08-15 19:58:22,532 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 19:58:22,533 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 19:58:25,109 - ui.dashboard - INFO - dashboard:_start_conversation:131 - Starting conversation session
2025-08-15 19:58:25,125 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: b625ce60-6357-405e-8032-ecab8ddb825f (mode: conversation)
2025-08-15 19:58:25,125 - core.application - INFO - application:_show_conversation:169 - Navigating to conversation
2025-08-15 19:58:37,345 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-15 19:58:37,345 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 19:58:37,347 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-15 19:58:37,422 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-15 19:58:38,718 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:58:42,048 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:58:45,734 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:58:46,304 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:58:47,680 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:58:49,219 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:58:50,761 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:58:51,948 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:58:59,967 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:59:03,547 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:59:05,255 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:59:05,851 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:59:14,559 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:59:16,348 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:59:16,861 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:59:18,212 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:59:19,678 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-15 19:59:20,448 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 19:59:20,780 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:59:21,566 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 19:59:22,507 - audio.voice_loop - INFO - voice_loop:stop_recording:106 - Recording stopped
2025-08-15 19:59:22,509 - ui.conversation - INFO - conversation:_stop_recording:178 - Recording stopped
2025-08-15 19:59:23,273 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 19:59:24,053 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 20:00:35,230 - core.application - INFO - application:_on_closing:200 - Window closing
2025-08-15 20:00:35,234 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-15 20:00:35,236 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 20:00:40,237 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 20:00:40,553 - audio.voice_loop - INFO - voice_loop:cleanup:406 - VoiceLoop cleanup completed
2025-08-15 20:00:40,554 - core.application - INFO - application:_cleanup:252 - Application cleanup completed
2025-08-15 20:00:40,573 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-15 20:00:40,574 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 20:00:45,575 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-15 20:00:45,575 - audio.voice_loop - INFO - voice_loop:cleanup:406 - VoiceLoop cleanup completed
2025-08-15 20:00:45,576 - core.application - INFO - application:_cleanup:252 - Application cleanup completed
2025-08-15 20:09:09,083 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 20:09:09,119 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 20:09:12,026 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-15 20:09:12,031 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-15 20:09:12,032 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-15 20:09:12,033 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 20:09:12,034 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-15 20:09:12,049 - data.migrations - INFO - migrations:create_migrations_table:37 - Migrations table created
2025-08-15 20:09:12,054 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 20:09:12,068 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 20:09:12,068 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 20:09:12,082 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 20:09:12,084 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 20:09:12,084 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 20:09:12,096 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 20:09:12,100 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 20:09:12,100 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 20:09:12,100 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: settings.key
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: settings.key
2025-08-15 20:09:12,114 - data.migrations - INFO - migrations:create_sample_data:328 - Sample user profile created
2025-08-15 20:09:12,114 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 20:09:12,114 - data.database - ERROR - database:get_connection:47 - Database operation failed: UNIQUE constraint failed: vocabulary.word, vocabulary.language
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 130, in insert
    cursor = conn.execute(query, tuple(data.values()))
sqlite3.IntegrityError: UNIQUE constraint failed: vocabulary.word, vocabulary.language
2025-08-15 20:09:12,132 - data.migrations - INFO - migrations:create_sample_data:360 - Sample data created
2025-08-15 20:09:12,132 - data.database - INFO - database:vacuum:177 - Database vacuum completed
2025-08-15 20:09:12,148 - data.database - INFO - database:analyze:183 - Database analysis completed
2025-08-15 20:09:12,150 - data.migrations - INFO - migrations:run_migrations:382 - Database migrations completed successfully
2025-08-15 20:09:12,152 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-15 20:09:12,152 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-15 20:09:12,152 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-15 20:09:12,154 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-15 20:09:12,154 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-15 20:09:12,154 - core.application - INFO - application:_initialize_audio_components:113 - Initializing audio components
2025-08-15 20:09:12,720 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-15 20:09:12,720 - core.application - INFO - application:_initialize_audio_components:117 - Audio components initialized successfully
2025-08-15 20:09:12,721 - core.application - INFO - application:_initialize_ai_agent:125 - Initializing AI agent
2025-08-15 20:09:12,721 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-15 20:09:12,722 - core.application - INFO - application:_initialize_ai_agent:129 - AI agent initialized successfully
2025-08-15 20:09:12,722 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-15 20:09:12,894 - core.application - INFO - application:_initialize_ui:84 - Creating dashboard frame...
2025-08-15 20:09:13,541 - ui.dashboard - INFO - dashboard:__init__:33 - Dashboard frame initialized
2025-08-15 20:09:13,542 - core.application - INFO - application:_initialize_ui:91 - Creating conversation frame...
2025-08-15 20:09:13,595 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-15 20:09:13,596 - core.application - INFO - application:_initialize_ui:109 - UI components initialized
2025-08-15 20:09:13,596 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-15 20:09:13,598 - core.application - INFO - application:_setup_event_handlers:150 - Event handlers set up
2025-08-15 20:09:13,599 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-15 20:09:13,599 - core.application - INFO - application:run:206 - Starting application main loop
2025-08-15 20:09:13,600 - core.application - INFO - application:_start_background_services:224 - Starting background services
2025-08-15 20:09:13,600 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-15 20:09:13,601 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-15 20:10:01,491 - ui.dashboard - INFO - dashboard:_start_conversation:131 - Starting conversation session
2025-08-15 20:10:01,501 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: feed047c-b395-483e-b764-219cce873cb5 (mode: conversation)
2025-08-15 20:10:01,501 - core.application - INFO - application:_show_conversation:169 - Navigating to conversation
2025-08-15 20:10:03,272 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-15 20:10:03,272 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-15 20:10:03,275 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-15 20:10:03,362 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-15 20:10:04,380 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 20:10:06,427 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-15 20:10:08,742 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 20:10:09,673 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 20:10:14,621 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 20:10:16,419 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-15 20:10:17,501 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 20:10:18,130 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 20:10:35,358 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-15 20:10:38,182 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-15 20:10:39,797 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-15 20:10:40,556 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-15 20:10:45,036 - audio.voice_loop - INFO - voice_loop:stop_recording:106 - Recording stopped
2025-08-15 20:10:45,038 - ui.conversation - INFO - conversation:_stop_recording:178 - Recording stopped
2025-08-15 20:10:48,577 - core.application - INFO - application:_on_closing:200 - Window closing
2025-08-15 20:10:48,578 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-15 20:10:48,578 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-15 20:10:53,578 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-18 21:55:59,864 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 21:56:50,595 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 21:56:50,688 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:01:15,902 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:01:15,945 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:01:20,053 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:01:20,056 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:01:20,056 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:01:20,056 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:01:20,056 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:01:20,056 - __main__ - ERROR - main:initialize_application:45 - Application initialization failed: run_migrations() got an unexpected keyword argument 'create_sample_data'
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\main.py", line 39, in initialize_application
    run_migrations(db_manager, create_sample_data=True)
TypeError: run_migrations() got an unexpected keyword argument 'create_sample_data'
2025-08-18 22:04:32,812 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:04:32,848 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:04:34,008 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:04:34,019 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:04:34,020 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:04:34,021 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:04:34,021 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:04:34,023 - __main__ - ERROR - main:initialize_application:45 - Application initialization failed: run_migrations() got an unexpected keyword argument 'create_sample_data'
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\main.py", line 39, in initialize_application
    run_migrations(db_manager, create_sample_data=True)
TypeError: run_migrations() got an unexpected keyword argument 'create_sample_data'
2025-08-18 22:07:31,748 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:07:31,780 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:07:32,856 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:07:32,861 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:07:32,861 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:07:32,862 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:07:32,864 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:07:32,864 - data.migrations - INFO - migrations:run_migrations:212 - Running migrations for database: C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:07:32,864 - data.migrations - INFO - migrations:create_schema:20 - Creating database schema
2025-08-18 22:07:32,897 - data.migrations - INFO - migrations:create_schema:155 - Database schema created successfully
2025-08-18 22:07:32,897 - data.migrations - INFO - migrations:insert_sample_data:159 - Inserting sample data
2025-08-18 22:07:32,905 - __main__ - ERROR - main:initialize_application:45 - Application initialization failed: table user_profile has no column named username
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\main.py", line 39, in initialize_application
    run_migrations(db_manager, create_sample_data=True)
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\migrations.py", line 218, in run_migrations
    migration_manager.insert_sample_data()
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\migrations.py", line 165, in insert_sample_data
    cursor.execute("""
sqlite3.OperationalError: table user_profile has no column named username
2025-08-18 22:08:25,537 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:08:25,570 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:08:26,721 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:08:26,721 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:08:26,721 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:08:26,724 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:08:26,724 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:08:26,726 - data.migrations - INFO - migrations:run_migrations:241 - Running migrations for database: C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:08:26,726 - data.migrations - INFO - migrations:create_schema:20 - Creating database schema
2025-08-18 22:08:26,728 - data.migrations - INFO - migrations:create_schema:155 - Database schema created successfully
2025-08-18 22:08:26,731 - data.migrations - INFO - migrations:insert_sample_data:159 - Inserting sample data
2025-08-18 22:08:26,735 - data.migrations - WARNING - migrations:insert_sample_data:197 - Skipping sample user insert due to schema mismatch: table user_profile has no column named email
2025-08-18 22:08:26,735 - __main__ - ERROR - main:initialize_application:45 - Application initialization failed: table vocabulary has no column named user_id
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\main.py", line 39, in initialize_application
    run_migrations(db_manager, create_sample_data=True)
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\migrations.py", line 247, in run_migrations
    migration_manager.insert_sample_data()
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\migrations.py", line 210, in insert_sample_data
    cursor.execute("""
sqlite3.OperationalError: table vocabulary has no column named user_id
2025-08-18 22:09:22,736 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:09:22,762 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:09:23,836 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:09:23,836 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:09:23,836 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:09:23,836 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:09:23,845 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:09:23,846 - data.migrations - INFO - migrations:run_migrations:269 - Running migrations for database: C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:09:23,846 - data.migrations - INFO - migrations:create_schema:20 - Creating database schema
2025-08-18 22:09:23,848 - data.migrations - INFO - migrations:create_schema:155 - Database schema created successfully
2025-08-18 22:09:23,853 - data.migrations - INFO - migrations:insert_sample_data:159 - Inserting sample data
2025-08-18 22:09:23,853 - data.migrations - WARNING - migrations:insert_sample_data:197 - Skipping sample user insert due to schema mismatch: table user_profile has no column named email
2025-08-18 22:09:23,853 - __main__ - ERROR - main:initialize_application:45 - Application initialization failed: table learning_sessions has no column named user_id
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\main.py", line 39, in initialize_application
    run_migrations(db_manager, create_sample_data=True)
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\migrations.py", line 275, in run_migrations
    migration_manager.insert_sample_data()
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\migrations.py", line 244, in insert_sample_data
    cursor.execute("""
sqlite3.OperationalError: table learning_sessions has no column named user_id
2025-08-18 22:13:15,466 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:13:15,496 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:13:16,677 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:13:16,677 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:13:16,677 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:13:16,684 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:13:16,684 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:13:16,684 - data.migrations - INFO - migrations:run_migrations:291 - Running migrations for database: C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:13:16,684 - data.migrations - INFO - migrations:create_schema:20 - Creating database schema
2025-08-18 22:13:16,688 - data.migrations - INFO - migrations:create_schema:155 - Database schema created successfully
2025-08-18 22:13:16,692 - data.migrations - INFO - migrations:insert_sample_data:159 - Inserting sample data
2025-08-18 22:13:16,692 - data.migrations - WARNING - migrations:insert_sample_data:197 - Skipping sample user insert due to schema mismatch: table user_profile has no column named email
2025-08-18 22:13:16,702 - data.migrations - INFO - migrations:insert_sample_data:272 - Sample data inserted successfully
2025-08-18 22:13:16,710 - data.migrations - INFO - migrations:run_migrations:299 - Migrations completed successfully
2025-08-18 22:13:16,710 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-18 22:13:16,710 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-18 22:13:16,710 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:13:16,710 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:13:16,710 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-18 22:13:16,714 - core.application - INFO - application:_initialize_audio_components:113 - Initializing audio components
2025-08-18 22:13:17,352 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-18 22:13:17,353 - core.application - INFO - application:_initialize_audio_components:117 - Audio components initialized successfully
2025-08-18 22:13:17,353 - core.application - INFO - application:_initialize_ai_agent:125 - Initializing AI agent
2025-08-18 22:13:17,353 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-18 22:13:17,355 - core.application - INFO - application:_initialize_ai_agent:129 - AI agent initialized successfully
2025-08-18 22:13:17,355 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-18 22:13:17,600 - core.application - INFO - application:_initialize_ui:84 - Creating dashboard frame...
2025-08-18 22:13:18,422 - ui.dashboard - INFO - dashboard:__init__:34 - Dashboard frame initialized
2025-08-18 22:13:18,424 - core.application - INFO - application:_initialize_ui:91 - Creating conversation frame...
2025-08-18 22:13:18,495 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-18 22:13:18,496 - core.application - INFO - application:_initialize_ui:109 - UI components initialized
2025-08-18 22:13:18,497 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-18 22:13:18,497 - core.application - INFO - application:_setup_event_handlers:150 - Event handlers set up
2025-08-18 22:13:18,498 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-18 22:13:18,498 - core.application - INFO - application:run:206 - Starting application main loop
2025-08-18 22:13:18,499 - core.application - INFO - application:_start_background_services:224 - Starting background services
2025-08-18 22:13:18,500 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-18 22:13:18,500 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-18 22:13:26,552 - ui.dashboard - INFO - dashboard:_start_conversation:406 - Starting conversation session
2025-08-18 22:13:26,568 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: c7d2520c-4ceb-4772-a0a4-8d0948a8fe69 (mode: conversation)
2025-08-18 22:13:26,569 - core.application - INFO - application:_show_conversation:169 - Navigating to conversation
2025-08-18 22:13:29,011 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-18 22:13:29,011 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-18 22:13:29,013 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-18 22:13:29,141 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-18 22:13:30,770 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:13:32,299 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:13:34,775 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:13:36,901 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:13:38,959 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:13:41,259 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:13:42,748 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:13:44,098 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:13:48,869 - audio.voice_loop - INFO - voice_loop:stop_recording:106 - Recording stopped
2025-08-18 22:13:48,870 - ui.conversation - INFO - conversation:_stop_recording:178 - Recording stopped
2025-08-18 22:13:49,828 - data.database - ERROR - database:get_connection:47 - Database operation failed: Error binding parameter 2 - probably unsupported type.
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 140, in update
    cursor = conn.execute(query, tuple(data.values()) + where_params)
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type.
2025-08-18 22:13:49,832 - core.session_manager - ERROR - session_manager:_update_session_in_db:330 - Failed to update session in database: Error binding parameter 2 - probably unsupported type.
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\session_manager.py", line 327, in _update_session_in_db
    self.db.update('learning_sessions', data, 'id = ?', (session.session_id,))
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 140, in update
    cursor = conn.execute(query, tuple(data.values()) + where_params)
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type.
2025-08-18 22:13:49,853 - ui.conversation - ERROR - conversation:_end_session:198 - Failed to end session: maximum recursion depth exceeded while calling a Python object
2025-08-18 22:13:55,303 - ui.conversation - INFO - conversation:_clear_conversation:206 - Conversation cleared
2025-08-18 22:13:59,559 - core.application - INFO - application:_on_closing:200 - Window closing
2025-08-18 22:13:59,559 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-18 22:13:59,561 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-18 22:14:04,562 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-18 22:14:04,827 - audio.voice_loop - INFO - voice_loop:cleanup:409 - VoiceLoop cleanup completed
2025-08-18 22:14:04,828 - core.application - INFO - application:_cleanup:252 - Application cleanup completed
2025-08-18 22:14:04,871 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-18 22:14:04,872 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-18 22:14:09,873 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-18 22:14:09,876 - audio.voice_loop - INFO - voice_loop:cleanup:409 - VoiceLoop cleanup completed
2025-08-18 22:14:09,877 - core.application - INFO - application:_cleanup:252 - Application cleanup completed
2025-08-18 22:27:20,892 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:27:20,909 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:27:22,162 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:27:22,162 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:27:22,165 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:27:22,166 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:27:22,167 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:27:22,167 - data.migrations - INFO - migrations:run_migrations:291 - Running migrations for database: C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:27:22,168 - data.migrations - INFO - migrations:create_schema:20 - Creating database schema
2025-08-18 22:27:22,171 - data.migrations - INFO - migrations:create_schema:155 - Database schema created successfully
2025-08-18 22:27:22,173 - data.migrations - INFO - migrations:insert_sample_data:159 - Inserting sample data
2025-08-18 22:27:22,173 - data.migrations - WARNING - migrations:insert_sample_data:197 - Skipping sample user insert due to schema mismatch: table user_profile has no column named email
2025-08-18 22:27:22,178 - data.migrations - INFO - migrations:insert_sample_data:272 - Sample data inserted successfully
2025-08-18 22:27:22,178 - data.migrations - INFO - migrations:run_migrations:299 - Migrations completed successfully
2025-08-18 22:27:22,184 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-18 22:27:22,184 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-18 22:27:22,184 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:27:22,184 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:27:22,186 - core.session_manager - INFO - session_manager:__init__:71 - SessionManager initialized
2025-08-18 22:27:22,187 - core.application - INFO - application:_initialize_audio_components:113 - Initializing audio components
2025-08-18 22:27:22,709 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-18 22:27:22,709 - core.application - INFO - application:_initialize_audio_components:117 - Audio components initialized successfully
2025-08-18 22:27:22,710 - core.application - INFO - application:_initialize_ai_agent:125 - Initializing AI agent
2025-08-18 22:27:22,710 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-18 22:27:22,711 - core.application - INFO - application:_initialize_ai_agent:129 - AI agent initialized successfully
2025-08-18 22:27:22,711 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-18 22:27:22,842 - core.application - INFO - application:_initialize_ui:84 - Creating dashboard frame...
2025-08-18 22:27:23,376 - ui.dashboard - INFO - dashboard:__init__:34 - Dashboard frame initialized
2025-08-18 22:27:23,378 - core.application - INFO - application:_initialize_ui:91 - Creating conversation frame...
2025-08-18 22:27:23,442 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-18 22:27:23,443 - core.application - INFO - application:_initialize_ui:109 - UI components initialized
2025-08-18 22:27:23,445 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-18 22:27:23,445 - core.application - INFO - application:_setup_event_handlers:150 - Event handlers set up
2025-08-18 22:27:23,446 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-18 22:27:23,446 - core.application - INFO - application:run:206 - Starting application main loop
2025-08-18 22:27:23,446 - core.application - INFO - application:_start_background_services:224 - Starting background services
2025-08-18 22:27:23,447 - core.session_manager - INFO - session_manager:start_background_tasks:250 - Session manager background tasks started
2025-08-18 22:27:23,448 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-18 22:27:27,229 - ui.dashboard - INFO - dashboard:_start_conversation:406 - Starting conversation session
2025-08-18 22:27:27,246 - core.session_manager - INFO - session_manager:start_session:95 - Started new session: d8cc4f35-ef84-4d78-90d8-70e1b32bc321 (mode: conversation)
2025-08-18 22:27:27,247 - core.application - INFO - application:_show_conversation:169 - Navigating to conversation
2025-08-18 22:27:36,984 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-18 22:27:36,984 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-18 22:27:36,986 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-18 22:27:37,073 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-18 22:27:38,108 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:27:39,898 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:27:41,403 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:27:42,458 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:27:43,039 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:27:43,490 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:27:44,771 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:27:45,788 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:27:45,931 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:27:47,961 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:27:47,964 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:27:49,183 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:27:51,679 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:27:51,981 - data.database - ERROR - database:get_connection:47 - Database operation failed: Error binding parameter 2 - probably unsupported type.
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 140, in update
    cursor = conn.execute(query, tuple(data.values()) + where_params)
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type.
2025-08-18 22:27:51,985 - core.session_manager - ERROR - session_manager:_update_session_in_db:330 - Failed to update session in database: Error binding parameter 2 - probably unsupported type.
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\session_manager.py", line 327, in _update_session_in_db
    self.db.update('learning_sessions', data, 'id = ?', (session.session_id,))
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 140, in update
    cursor = conn.execute(query, tuple(data.values()) + where_params)
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type.
2025-08-18 22:27:52,010 - ui.conversation - ERROR - conversation:_end_session:198 - Failed to end session: maximum recursion depth exceeded while calling a Python object
2025-08-18 22:27:52,698 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:27:54,491 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:27:55,518 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:27:55,615 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:27:56,526 - core.application - INFO - application:_on_closing:200 - Window closing
2025-08-18 22:27:56,527 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-18 22:27:56,529 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-18 22:27:56,774 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:27:56,774 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:27:58,851 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:28:01,531 - core.session_manager - INFO - session_manager:stop_background_tasks:260 - Session manager background tasks stopped
2025-08-18 22:28:06,872 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:31:44,060 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:31:44,085 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:31:45,319 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:31:45,319 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:31:45,319 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:31:45,321 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:31:45,322 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:31:45,322 - data.migrations - INFO - migrations:run_migrations:291 - Running migrations for database: C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:31:45,323 - data.migrations - INFO - migrations:create_schema:20 - Creating database schema
2025-08-18 22:31:45,326 - data.migrations - INFO - migrations:create_schema:155 - Database schema created successfully
2025-08-18 22:31:45,329 - data.migrations - INFO - migrations:insert_sample_data:159 - Inserting sample data
2025-08-18 22:31:45,331 - data.migrations - WARNING - migrations:insert_sample_data:197 - Skipping sample user insert due to schema mismatch: table user_profile has no column named email
2025-08-18 22:31:45,335 - data.migrations - INFO - migrations:insert_sample_data:272 - Sample data inserted successfully
2025-08-18 22:31:45,337 - data.migrations - INFO - migrations:run_migrations:299 - Migrations completed successfully
2025-08-18 22:31:45,338 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-18 22:31:45,338 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-18 22:31:45,340 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:31:45,340 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:31:45,340 - core.session_manager - INFO - session_manager:__init__:72 - SessionManager initialized
2025-08-18 22:31:45,340 - core.application - INFO - application:_initialize_audio_components:113 - Initializing audio components
2025-08-18 22:31:45,828 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-18 22:31:45,829 - core.application - INFO - application:_initialize_audio_components:117 - Audio components initialized successfully
2025-08-18 22:31:45,830 - core.application - INFO - application:_initialize_ai_agent:125 - Initializing AI agent
2025-08-18 22:31:45,831 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-18 22:31:45,831 - core.application - INFO - application:_initialize_ai_agent:129 - AI agent initialized successfully
2025-08-18 22:31:45,832 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-18 22:31:45,960 - core.application - INFO - application:_initialize_ui:84 - Creating dashboard frame...
2025-08-18 22:31:46,628 - ui.dashboard - INFO - dashboard:__init__:34 - Dashboard frame initialized
2025-08-18 22:31:46,630 - core.application - INFO - application:_initialize_ui:91 - Creating conversation frame...
2025-08-18 22:31:46,703 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-18 22:31:46,704 - core.application - INFO - application:_initialize_ui:109 - UI components initialized
2025-08-18 22:31:46,705 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-18 22:31:46,706 - core.application - INFO - application:_setup_event_handlers:150 - Event handlers set up
2025-08-18 22:31:46,706 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-18 22:31:46,707 - core.application - INFO - application:run:206 - Starting application main loop
2025-08-18 22:31:46,708 - core.application - INFO - application:_start_background_services:224 - Starting background services
2025-08-18 22:31:46,709 - core.session_manager - INFO - session_manager:start_background_tasks:251 - Session manager background tasks started
2025-08-18 22:31:46,710 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-18 22:31:48,695 - ui.dashboard - INFO - dashboard:_start_conversation:406 - Starting conversation session
2025-08-18 22:31:48,717 - core.session_manager - INFO - session_manager:start_session:96 - Started new session: 68016608-3b31-40d8-b71a-cb3c4f2d01fe (mode: conversation)
2025-08-18 22:31:48,718 - core.application - INFO - application:_show_conversation:169 - Navigating to conversation
2025-08-18 22:31:50,076 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-18 22:31:50,076 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-18 22:31:50,077 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-18 22:31:50,163 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-18 22:31:51,462 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:31:54,271 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.3s) - processing audio...
2025-08-18 22:31:55,967 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:31:56,830 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:31:56,997 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:31:58,621 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.3s) - processing audio...
2025-08-18 22:31:59,858 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:32:01,090 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:32:08,103 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:32:09,630 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.3s) - processing audio...
2025-08-18 22:32:09,891 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:32:11,740 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:32:12,190 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.3s) - processing audio...
2025-08-18 22:32:12,450 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:32:14,488 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:32:15,221 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:32:16,030 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.3s) - processing audio...
2025-08-18 22:32:17,266 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:32:17,675 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:32:28,320 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:32:29,600 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.3s) - processing audio...
2025-08-18 22:32:31,358 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:32:32,423 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:32:36,420 - data.database - ERROR - database:get_connection:47 - Database operation failed: Error binding parameter 2 - probably unsupported type.
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 140, in update
    cursor = conn.execute(query, tuple(data.values()) + where_params)
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type.
2025-08-18 22:32:36,424 - core.session_manager - ERROR - session_manager:_update_session_in_db:331 - Failed to update session in database: Error binding parameter 2 - probably unsupported type.
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\session_manager.py", line 328, in _update_session_in_db
    self.db.update('learning_sessions', data, 'id = ?', (session.session_id,))
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 140, in update
    cursor = conn.execute(query, tuple(data.values()) + where_params)
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type.
2025-08-18 22:32:36,450 - ui.conversation - ERROR - conversation:_end_session:198 - Failed to end session: maximum recursion depth exceeded while calling a Python object
2025-08-18 22:32:39,214 - ui.conversation - INFO - conversation:_end_session:193 - Session ended: SessionState(session_id='68016608-3b31-40d8-b71a-cb3c4f2d01fe', started_at=datetime.datetime(2025, 8, 18, 22, 31, 48, 697602), ended_at=datetime.datetime(2025, 8, 18, 22, 32, 36, 417577), duration_seconds=47, mode='conversation', is_active=False, engagement_score=0.0, difficulty_level=1.0, vocab_practiced=[], new_vocab_learned=[], corrections_made=[], notes=...)
2025-08-18 22:32:41,639 - core.application - INFO - application:_on_closing:200 - Window closing
2025-08-18 22:32:41,640 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-18 22:32:41,641 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-18 22:32:46,643 - core.session_manager - INFO - session_manager:stop_background_tasks:261 - Session manager background tasks stopped
2025-08-18 22:40:56,484 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:40:56,518 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:40:58,320 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:40:58,320 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:40:58,320 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:40:58,320 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:40:58,320 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:40:58,329 - data.migrations - INFO - migrations:run_migrations:291 - Running migrations for database: C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:40:58,329 - data.migrations - INFO - migrations:create_schema:20 - Creating database schema
2025-08-18 22:40:58,335 - data.migrations - INFO - migrations:create_schema:155 - Database schema created successfully
2025-08-18 22:40:58,337 - data.migrations - INFO - migrations:insert_sample_data:159 - Inserting sample data
2025-08-18 22:40:58,341 - data.migrations - WARNING - migrations:insert_sample_data:197 - Skipping sample user insert due to schema mismatch: table user_profile has no column named email
2025-08-18 22:40:58,349 - data.migrations - INFO - migrations:insert_sample_data:272 - Sample data inserted successfully
2025-08-18 22:40:58,355 - data.migrations - INFO - migrations:run_migrations:299 - Migrations completed successfully
2025-08-18 22:40:58,356 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-18 22:40:58,356 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-18 22:40:58,356 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:40:58,356 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:40:58,356 - core.session_manager - INFO - session_manager:__init__:72 - SessionManager initialized
2025-08-18 22:40:58,361 - core.application - INFO - application:_initialize_audio_components:113 - Initializing audio components
2025-08-18 22:40:59,104 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-18 22:40:59,105 - core.application - INFO - application:_initialize_audio_components:117 - Audio components initialized successfully
2025-08-18 22:40:59,106 - core.application - INFO - application:_initialize_ai_agent:125 - Initializing AI agent
2025-08-18 22:40:59,107 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-18 22:40:59,108 - core.application - INFO - application:_initialize_ai_agent:129 - AI agent initialized successfully
2025-08-18 22:40:59,108 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-18 22:40:59,308 - core.application - INFO - application:_initialize_ui:84 - Creating dashboard frame...
2025-08-18 22:41:00,227 - ui.dashboard - INFO - dashboard:__init__:34 - Dashboard frame initialized
2025-08-18 22:41:00,231 - core.application - INFO - application:_initialize_ui:91 - Creating conversation frame...
2025-08-18 22:41:00,326 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-18 22:41:00,328 - core.application - INFO - application:_initialize_ui:109 - UI components initialized
2025-08-18 22:41:00,329 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-18 22:41:00,331 - core.application - INFO - application:_setup_event_handlers:150 - Event handlers set up
2025-08-18 22:41:00,332 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-18 22:41:00,333 - core.application - INFO - application:run:206 - Starting application main loop
2025-08-18 22:41:00,334 - core.application - INFO - application:_start_background_services:224 - Starting background services
2025-08-18 22:41:00,335 - core.session_manager - INFO - session_manager:start_background_tasks:251 - Session manager background tasks started
2025-08-18 22:41:00,336 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-18 22:41:02,881 - ui.dashboard - INFO - dashboard:_start_conversation:406 - Starting conversation session
2025-08-18 22:41:02,905 - core.session_manager - INFO - session_manager:start_session:96 - Started new session: 8e521ad4-4d8e-4bff-b7c5-d2114204e1ec (mode: conversation)
2025-08-18 22:41:02,906 - core.application - INFO - application:_show_conversation:169 - Navigating to conversation
2025-08-18 22:41:08,469 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-18 22:41:08,469 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-18 22:41:08,471 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-18 22:41:08,584 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-18 22:41:14,233 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:41:15,764 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-18 22:41:18,143 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:41:18,962 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:41:40,087 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:41:42,391 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-18 22:41:46,784 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:41:47,836 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:41:51,943 - audio.voice_loop - INFO - voice_loop:stop_recording:106 - Recording stopped
2025-08-18 22:41:51,944 - ui.conversation - INFO - conversation:_stop_recording:178 - Recording stopped
2025-08-18 22:41:53,350 - data.database - ERROR - database:get_connection:47 - Database operation failed: Error binding parameter 2 - probably unsupported type.
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 43, in get_connection
    yield conn
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 140, in update
    cursor = conn.execute(query, tuple(data.values()) + where_params)
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type.
2025-08-18 22:41:53,358 - core.session_manager - ERROR - session_manager:_update_session_in_db:331 - Failed to update session in database: Error binding parameter 2 - probably unsupported type.
Traceback (most recent call last):
  File "C:\Users\nolan\personal\personal-projects\Nabu\core\session_manager.py", line 328, in _update_session_in_db
    self.db.update('learning_sessions', data, 'id = ?', (session.session_id,))
  File "C:\Users\nolan\personal\personal-projects\Nabu\data\database.py", line 140, in update
    cursor = conn.execute(query, tuple(data.values()) + where_params)
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type.
2025-08-18 22:41:53,400 - ui.conversation - ERROR - conversation:_end_session:198 - Failed to end session: maximum recursion depth exceeded while calling a Python object
2025-08-18 22:41:58,489 - core.application - INFO - application:_on_closing:200 - Window closing
2025-08-18 22:41:58,491 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-18 22:41:58,493 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-18 22:42:00,349 - core.session_manager - INFO - session_manager:stop_background_tasks:261 - Session manager background tasks stopped
2025-08-18 22:42:00,620 - audio.voice_loop - INFO - voice_loop:cleanup:425 - VoiceLoop cleanup completed
2025-08-18 22:42:00,621 - core.application - INFO - application:_cleanup:252 - Application cleanup completed
2025-08-18 22:42:00,673 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-18 22:42:00,674 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-18 22:42:00,676 - core.session_manager - INFO - session_manager:stop_background_tasks:261 - Session manager background tasks stopped
2025-08-18 22:42:00,676 - audio.voice_loop - INFO - voice_loop:cleanup:425 - VoiceLoop cleanup completed
2025-08-18 22:42:00,677 - core.application - INFO - application:_cleanup:252 - Application cleanup completed
2025-08-18 22:47:05,991 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:47:06,028 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:47:07,843 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:47:07,843 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:47:07,850 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:47:07,853 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:47:07,853 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:47:07,853 - data.migrations - INFO - migrations:run_migrations:291 - Running migrations for database: C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:47:07,856 - data.migrations - INFO - migrations:create_schema:20 - Creating database schema
2025-08-18 22:47:07,860 - data.migrations - INFO - migrations:create_schema:155 - Database schema created successfully
2025-08-18 22:47:07,864 - data.migrations - INFO - migrations:insert_sample_data:159 - Inserting sample data
2025-08-18 22:47:07,867 - data.migrations - WARNING - migrations:insert_sample_data:197 - Skipping sample user insert due to schema mismatch: table user_profile has no column named email
2025-08-18 22:47:07,867 - data.migrations - INFO - migrations:insert_sample_data:272 - Sample data inserted successfully
2025-08-18 22:47:07,876 - data.migrations - INFO - migrations:run_migrations:299 - Migrations completed successfully
2025-08-18 22:47:07,876 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-18 22:47:07,876 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-18 22:47:07,880 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:47:07,881 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:47:07,882 - core.session_manager - INFO - session_manager:__init__:72 - SessionManager initialized
2025-08-18 22:47:07,883 - core.application - INFO - application:_initialize_audio_components:113 - Initializing audio components
2025-08-18 22:47:08,514 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-18 22:47:08,515 - core.application - INFO - application:_initialize_audio_components:117 - Audio components initialized successfully
2025-08-18 22:47:08,516 - core.application - INFO - application:_initialize_ai_agent:125 - Initializing AI agent
2025-08-18 22:47:08,517 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-18 22:47:08,518 - core.application - INFO - application:_initialize_ai_agent:129 - AI agent initialized successfully
2025-08-18 22:47:08,520 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-18 22:47:08,736 - core.application - INFO - application:_initialize_ui:84 - Creating dashboard frame...
2025-08-18 22:47:09,635 - ui.dashboard - INFO - dashboard:__init__:34 - Dashboard frame initialized
2025-08-18 22:47:09,638 - core.application - INFO - application:_initialize_ui:91 - Creating conversation frame...
2025-08-18 22:47:09,736 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-18 22:47:09,738 - core.application - INFO - application:_initialize_ui:109 - UI components initialized
2025-08-18 22:47:09,738 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-18 22:47:09,739 - core.application - INFO - application:_setup_event_handlers:150 - Event handlers set up
2025-08-18 22:47:09,740 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-18 22:47:09,742 - core.application - INFO - application:run:206 - Starting application main loop
2025-08-18 22:47:09,744 - core.application - INFO - application:_start_background_services:224 - Starting background services
2025-08-18 22:47:09,745 - core.session_manager - INFO - session_manager:start_background_tasks:251 - Session manager background tasks started
2025-08-18 22:47:09,746 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-18 22:47:11,967 - ui.dashboard - INFO - dashboard:_start_conversation:406 - Starting conversation session
2025-08-18 22:47:11,992 - core.session_manager - INFO - session_manager:start_session:96 - Started new session: 7a079d3b-7852-4d17-99fb-782da2d68251 (mode: conversation)
2025-08-18 22:47:11,993 - core.application - INFO - application:_show_conversation:169 - Navigating to conversation
2025-08-18 22:47:13,644 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-18 22:47:13,644 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-18 22:47:13,646 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-18 22:47:13,752 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-18 22:47:25,802 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:47:27,855 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.5s) - processing audio...
2025-08-18 22:47:30,879 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:47:31,700 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:48:25,913 - ui.conversation - ERROR - conversation:_end_session:198 - Failed to end session: maximum recursion depth exceeded while calling a Python object
2025-08-18 22:48:30,181 - core.application - INFO - application:_on_closing:200 - Window closing
2025-08-18 22:48:30,183 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-18 22:48:30,184 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-18 22:48:35,185 - core.session_manager - INFO - session_manager:stop_background_tasks:261 - Session manager background tasks stopped
2025-08-18 22:49:35,538 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:49:35,569 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:49:37,712 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:49:37,713 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:49:37,713 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:49:37,715 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:49:37,715 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:49:37,717 - data.migrations - INFO - migrations:run_migrations:291 - Running migrations for database: C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:49:37,718 - data.migrations - INFO - migrations:create_schema:20 - Creating database schema
2025-08-18 22:49:37,722 - data.migrations - INFO - migrations:create_schema:155 - Database schema created successfully
2025-08-18 22:49:37,725 - data.migrations - INFO - migrations:insert_sample_data:159 - Inserting sample data
2025-08-18 22:49:37,728 - data.migrations - WARNING - migrations:insert_sample_data:197 - Skipping sample user insert due to schema mismatch: table user_profile has no column named email
2025-08-18 22:49:37,738 - data.migrations - INFO - migrations:insert_sample_data:272 - Sample data inserted successfully
2025-08-18 22:49:37,743 - data.migrations - INFO - migrations:run_migrations:299 - Migrations completed successfully
2025-08-18 22:49:37,743 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-18 22:49:37,743 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-18 22:49:37,743 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:49:37,743 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:49:37,743 - core.session_manager - INFO - session_manager:__init__:72 - SessionManager initialized
2025-08-18 22:49:37,743 - core.application - INFO - application:_initialize_audio_components:113 - Initializing audio components
2025-08-18 22:49:38,282 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-18 22:49:38,283 - core.application - INFO - application:_initialize_audio_components:117 - Audio components initialized successfully
2025-08-18 22:49:38,284 - core.application - INFO - application:_initialize_ai_agent:125 - Initializing AI agent
2025-08-18 22:49:38,285 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-18 22:49:38,286 - core.application - INFO - application:_initialize_ai_agent:129 - AI agent initialized successfully
2025-08-18 22:49:38,287 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-18 22:49:38,464 - core.application - INFO - application:_initialize_ui:84 - Creating dashboard frame...
2025-08-18 22:49:39,379 - ui.dashboard - INFO - dashboard:__init__:34 - Dashboard frame initialized
2025-08-18 22:49:39,382 - core.application - INFO - application:_initialize_ui:91 - Creating conversation frame...
2025-08-18 22:49:39,490 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-18 22:49:39,492 - core.application - INFO - application:_initialize_ui:109 - UI components initialized
2025-08-18 22:49:39,493 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-18 22:49:39,493 - core.application - INFO - application:_setup_event_handlers:150 - Event handlers set up
2025-08-18 22:49:39,494 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-18 22:49:39,495 - core.application - INFO - application:run:206 - Starting application main loop
2025-08-18 22:49:39,495 - core.application - INFO - application:_start_background_services:224 - Starting background services
2025-08-18 22:49:39,496 - core.session_manager - INFO - session_manager:start_background_tasks:251 - Session manager background tasks started
2025-08-18 22:49:39,497 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-18 22:49:40,878 - ui.dashboard - INFO - dashboard:_start_conversation:406 - Starting conversation session
2025-08-18 22:49:40,891 - core.session_manager - INFO - session_manager:start_session:96 - Started new session: 88b46b2d-6248-4eec-b485-af935363da39 (mode: conversation)
2025-08-18 22:49:40,892 - core.application - INFO - application:_show_conversation:169 - Navigating to conversation
2025-08-18 22:49:41,926 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-18 22:49:41,926 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-18 22:49:41,928 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-18 22:49:42,017 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-18 22:50:00,682 - core.session_manager - INFO - session_manager:end_session:130 - Ended session: 88b46b2d-6248-4eec-b485-af935363da39 (duration: 19s)
2025-08-18 22:50:00,683 - ui.conversation - INFO - conversation:_end_session:193 - Session ended: SessionState(session_id='88b46b2d-6248-4eec-b485-af935363da39', started_at=datetime.datetime(2025, 8, 18, 22, 49, 40, 879012), ended_at=datetime.datetime(2025, 8, 18, 22, 50, 0, 659386), duration_seconds=19, mode='conversation', is_active=False, engagement_score=0.0, difficulty_level=1.0, vocab_practiced=[], new_vocab_learned=[], corrections_made=[], notes='')
2025-08-18 22:50:23,222 - core.application - INFO - application:_on_closing:200 - Window closing
2025-08-18 22:50:23,222 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-18 22:50:23,223 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-18 22:50:28,224 - core.session_manager - INFO - session_manager:stop_background_tasks:261 - Session manager background tasks stopped
2025-08-18 22:50:28,499 - audio.voice_loop - INFO - voice_loop:cleanup:425 - VoiceLoop cleanup completed
2025-08-18 22:50:28,500 - core.application - INFO - application:_cleanup:252 - Application cleanup completed
2025-08-18 22:50:28,553 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-18 22:50:28,554 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-18 22:50:33,556 - core.session_manager - INFO - session_manager:stop_background_tasks:261 - Session manager background tasks stopped
2025-08-18 22:50:33,558 - audio.voice_loop - INFO - voice_loop:cleanup:425 - VoiceLoop cleanup completed
2025-08-18 22:50:33,560 - core.application - INFO - application:_cleanup:252 - Application cleanup completed
2025-08-18 22:52:42,027 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:52:42,062 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:52:43,831 - __main__ - INFO - main:initialize_application:27 - Starting AI Language Tutor application
2025-08-18 22:52:43,831 - __main__ - INFO - main:initialize_application:28 - Configuration loaded: {'audio': {'sample_rate': 16000, 'chunk_size': 1024, 'channels': 1, 'silence_threshold': 1.5, 'min_speech_duration': 0.5, 'rms_threshold': 10, 'zcr_threshold': 0.001, 'debug_audio': True}, 'ui': {'window_width': 1200, 'window_height': 800, 'theme': 'dark', 'font_family': 'SF Pro Display', 'font_size_base': 15, 'animation_speed': 0.3, 'enable_sounds': True}, 'agent': {'model': 'gpt-4o-mini', 'max_tokens': 150, 'temperature': 0.7, 'system_prompt_template': 'default', 'enable_tools': True, 'max_conversation_history': 10, 'response_timeout': 30}, 'database': {'db_path': 'data/tutor.db', 'backup_enabled': True, 'backup_interval_hours': 24, 'max_backup_count': 7, 'retention_days': 365}, 'learning': {'srs_enabled': True, 'vocab_review_interval_hours': 24, 'max_active_vocab': 750, 'difficulty_adjustment_rate': 0.1, 'engagement_threshold': 0.7, 'session_timeout_minutes': 30}, 'security': {'encrypt_user_data': True, 'encryption_key_path': 'config/encryption.key', 'api_key_rotation_days': 90, 'session_timeout_minutes': 60}, 'performance': {'max_concurrent_requests': 5, 'cache_enabled': True, 'cache_size_mb': 100, 'log_level': 'INFO', 'enable_profiling': False}, 'app_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu', 'data_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\data', 'config_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\config', 'assets_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\assets', 'logs_dir': 'C:\\Users\\nolan\\personal\\personal-projects\\Nabu\\logs'}
2025-08-18 22:52:43,831 - __main__ - INFO - main:initialize_application:34 - Initializing database...
2025-08-18 22:52:43,831 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:52:43,842 - __main__ - INFO - main:initialize_application:38 - Running database migrations...
2025-08-18 22:52:43,842 - data.migrations - INFO - migrations:run_migrations:291 - Running migrations for database: C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:52:43,842 - data.migrations - INFO - migrations:create_schema:20 - Creating database schema
2025-08-18 22:52:43,850 - data.migrations - INFO - migrations:create_schema:155 - Database schema created successfully
2025-08-18 22:52:43,852 - data.migrations - INFO - migrations:insert_sample_data:159 - Inserting sample data
2025-08-18 22:52:43,852 - data.migrations - WARNING - migrations:insert_sample_data:197 - Skipping sample user insert due to schema mismatch: table user_profile has no column named email
2025-08-18 22:52:43,865 - data.migrations - INFO - migrations:insert_sample_data:272 - Sample data inserted successfully
2025-08-18 22:52:43,871 - data.migrations - INFO - migrations:run_migrations:299 - Migrations completed successfully
2025-08-18 22:52:43,871 - __main__ - INFO - main:initialize_application:41 - Application initialization completed successfully
2025-08-18 22:52:43,871 - core.application - INFO - application:__init__:29 - Initializing TutorApplication
2025-08-18 22:52:43,874 - data.database - INFO - database:__init__:27 - Initializing database at C:\Users\nolan\personal\personal-projects\Nabu\data\tutor.db
2025-08-18 22:52:43,874 - core.event_bus - INFO - event_bus:__init__:24 - EventBus initialized
2025-08-18 22:52:43,874 - core.session_manager - INFO - session_manager:__init__:72 - SessionManager initialized
2025-08-18 22:52:43,876 - core.application - INFO - application:_initialize_audio_components:113 - Initializing audio components
2025-08-18 22:52:44,422 - audio.voice_loop - INFO - voice_loop:__init__:73 - VoiceLoop initialized
2025-08-18 22:52:44,429 - core.application - INFO - application:_initialize_audio_components:117 - Audio components initialized successfully
2025-08-18 22:52:44,429 - core.application - INFO - application:_initialize_ai_agent:125 - Initializing AI agent
2025-08-18 22:52:44,431 - agent.orchestrator - INFO - orchestrator:__init__:24 - AgentOrchestrator initialized (placeholder)
2025-08-18 22:52:44,432 - core.application - INFO - application:_initialize_ai_agent:129 - AI agent initialized successfully
2025-08-18 22:52:44,434 - core.application - INFO - application:_initialize_ui:52 - Initializing UI components
2025-08-18 22:52:44,630 - core.application - INFO - application:_initialize_ui:84 - Creating dashboard frame...
2025-08-18 22:52:45,602 - ui.dashboard - INFO - dashboard:__init__:34 - Dashboard frame initialized
2025-08-18 22:52:45,605 - core.application - INFO - application:_initialize_ui:91 - Creating conversation frame...
2025-08-18 22:52:45,714 - ui.conversation - INFO - conversation:__init__:40 - Conversation frame initialized
2025-08-18 22:52:45,722 - core.application - INFO - application:_initialize_ui:109 - UI components initialized
2025-08-18 22:52:45,724 - core.application - INFO - application:_setup_event_handlers:137 - Setting up event handlers
2025-08-18 22:52:45,725 - core.application - INFO - application:_setup_event_handlers:150 - Event handlers set up
2025-08-18 22:52:45,726 - core.application - INFO - application:__init__:48 - TutorApplication initialized successfully
2025-08-18 22:52:45,727 - core.application - INFO - application:run:206 - Starting application main loop
2025-08-18 22:52:45,727 - core.application - INFO - application:_start_background_services:224 - Starting background services
2025-08-18 22:52:45,729 - core.session_manager - INFO - session_manager:start_background_tasks:251 - Session manager background tasks started
2025-08-18 22:52:45,730 - agent.orchestrator - INFO - orchestrator:start_background_tasks:29 - Agent orchestrator background tasks started (placeholder)
2025-08-18 22:52:46,817 - ui.dashboard - INFO - dashboard:_start_conversation:406 - Starting conversation session
2025-08-18 22:52:46,838 - core.session_manager - INFO - session_manager:start_session:96 - Started new session: 21e7b141-51b5-4e32-a540-e73a3679bdfe (mode: conversation)
2025-08-18 22:52:46,839 - core.application - INFO - application:_show_conversation:169 - Navigating to conversation
2025-08-18 22:52:50,023 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:119 - Using audio device: Microphone Array (IntelÂ® Smart 
2025-08-18 22:52:50,023 - audio.voice_loop - INFO - voice_loop:start_recording:88 - Recording started
2025-08-18 22:52:50,025 - ui.conversation - INFO - conversation:_start_recording:163 - Recording started
2025-08-18 22:52:50,121 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:145 - Audio stream opened, starting VAD
2025-08-18 22:52:51,161 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:52:54,492 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:52:56,714 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:52:57,302 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:52:58,330 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:52:59,257 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:52:59,349 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:52:59,580 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:53:00,630 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:53:01,222 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:53:03,676 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:53:04,729 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:53:06,522 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:53:07,781 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:53:08,308 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:53:08,801 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:53:09,342 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:53:10,231 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:53:10,246 - core.session_manager - INFO - session_manager:end_session:130 - Ended session: 21e7b141-51b5-4e32-a540-e73a3679bdfe (duration: 23s)
2025-08-18 22:53:10,248 - ui.conversation - INFO - conversation:_end_session:193 - Session ended: SessionState(session_id='21e7b141-51b5-4e32-a540-e73a3679bdfe', started_at=datetime.datetime(2025, 8, 18, 22, 52, 46, 818686), ended_at=datetime.datetime(2025, 8, 18, 22, 53, 10, 226441), duration_seconds=23, mode='conversation', is_active=False, engagement_score=0.0, difficulty_level=1.0, vocab_practiced=[], new_vocab_learned=[], corrections_made=[], notes='')
2025-08-18 22:53:10,844 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-18 22:53:12,411 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:159 - 🎤 Speech detected - recording...
2025-08-18 22:53:13,431 - audio.voice_loop - INFO - voice_loop:_continuous_record_audio:167 - 🔇 Silence detected (1.0s) - processing audio...
2025-08-18 22:53:14,594 - httpx - INFO - _client:_send_single_request:1025 - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-18 22:53:15,398 - core.application - INFO - application:_on_closing:200 - Window closing
2025-08-18 22:53:15,400 - core.application - INFO - application:_cleanup:235 - Cleaning up application resources
2025-08-18 22:53:15,401 - agent.orchestrator - INFO - orchestrator:stop_background_tasks:34 - Agent orchestrator background tasks stopped (placeholder)
2025-08-18 22:53:15,730 - core.session_manager - INFO - session_manager:stop_background_tasks:261 - Session manager background tasks stopped
